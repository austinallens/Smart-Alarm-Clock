import tkinter as tk
from threading import Thread
from playsound import playsound  # or whatever you use
from math_quiz import MathQuestionFrame  # import the quiz frame

class AlarmApp:
    def __init__(self, root):
        self.root = root
        self.root.title("Math Alarm Clock")
        self.alarm_sound = "alarm.mp3"  # your sound file
        self.alarm_playing = False

        tk.Label(root, text="Your Alarm Clock", font=("Arial", 18)).pack(pady=10)
        tk.Button(root, text="Start Alarm", command=self.start_alarm).pack(pady=5)

    def play_alarm(self):
        self.alarm_playing = True
        while self.alarm_playing:
            playsound(self.alarm_sound)

    def stop_alarm(self):
        self.alarm_playing = False
        self.quiz_frame.destroy()

    def start_alarm(self):
        # play alarm in background thread
        Thread(target=self.play_alarm, daemon=True).start()

        # show math question frame inside existing window
        self.quiz_frame = MathQuestionFrame(self.root,
                                            stop_alarm_callback=self.stop_alarm,
                                            difficulty="Medium")
        self.quiz_frame.pack(pady=20)

# Run the app
if __name__ == "__main__":
    root = tk.Tk()
    app = AlarmApp(root)
    root.mainloop()
